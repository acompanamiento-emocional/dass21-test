<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>DASS-21 – Acompañamiento emocional</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --azul-principal: #cfe0f8;
  --azul-suave: #eef4ff;
  --azul-activo: #6b9cff;
  --texto: #1f2933;
  --gris: #9ca3af;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background: #fff;
  color: var(--texto);
}

/* ---------- HEADER ---------- */
header {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 28px 24px 20px;
  color: var(--gris);
}

header img {
  width: 70px;
  height: 70px;
  object-fit: contain;
}

header span {
  font-size: 1.3rem;
}

/* ---------- DIVISOR ---------- */
.divisor {
  height: 26px;
  background: var(--azul-principal);
  margin-bottom: 20px;
}

/* ---------- SCREENS ---------- */
.screen {
  display: none;
  min-height: calc(100vh - 160px);
  padding: 40px 20px;
  max-width: 640px;
  margin: 0 auto;
  text-align: center;
}

.screen.active {
  display: flex;
  flex-direction: column;
  justify-content: center;
}

/* ---------- TEXT ---------- */
h1 {
  font-size: 2.2rem;
  margin-bottom: 28px;
}

p {
  line-height: 1.75;
  margin-bottom: 18px;
}

.disclaimer {
  font-size: 0.85rem;
  color: var(--gris);
  margin-top: 28px;
}

/* ---------- BUTTON ---------- */
button {
  margin: 32px auto 0;
  padding: 16px 52px;
  border: none;
  border-radius: 999px;
  background: var(--azul-principal);
  font-size: 1.05rem;
  cursor: pointer;
}

/* ---------- PROGRESS ---------- */
.progress {
  height: 16px;
  background: #e5e7eb;
  border-radius: 10px;
  overflow: hidden;
  margin-bottom: 40px;
}

.progress-bar {
  height: 100%;
  width: 0%;
  background: var(--azul-activo);
  transition: width 0.35s ease;
}

/* ---------- QUESTION ---------- */
.question {
  font-size: 1.6rem;
  margin-bottom: 40px;
}

/* ---------- OPTIONS ---------- */
.option {
  background: var(--azul-suave);
  border-radius: 18px;
  padding: 18px 20px;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 16px;
  cursor: pointer;
  text-align: left;
}

.circle {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  border: 2px solid #6b7280;
}

.option.selected {
  background: #dbe7ff;
}

.option.selected .circle {
  background: var(--azul-activo);
  border-color: var(--azul-activo);
}

/* ---------- RESULT CARDS ---------- */
.cards {
  display: grid;
  gap: 20px;
  margin-top: 30px;
}

.card {
  background: var(--azul-suave);
  padding: 20px;
  border-radius: 18px;
  text-align: left;
}

.card strong {
  font-size: 1.1rem;
}

/* ---------- MODAL ---------- */
.modal-bg {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  display: none;
  justify-content: center;
  align-items: center;
}

.modal {
  background: #fff;
  padding: 30px;
  border-radius: 22px;
  max-width: 520px;
  width: 90%;
  text-align: left;
}

.modal h2 {
  margin-top: 0;
}
</style>
</head>

<body>

<header>
  <img src="logo.png" alt="Logo Acompañamiento emocional">
  <span>Acompañamiento emocional</span>
</header>
<div class="divisor"></div>

<!-- BIENVENIDA -->
<section class="screen active" id="welcome">
  <h1>Bienvenido/a</h1>
  <p>Este espacio fue creado para acompañarte a explorar cómo te has sentido emocionalmente durante la última semana.</p>
  <p>Responde con calma y honestidad. La evaluación toma solo unos minutos.</p>
  <p class="disclaimer">Esta evaluación es únicamente de orientación y no sustituye un diagnóstico clínico.</p>
  <button onclick="startTest()">Comenzar evaluación</button>
</section>

<!-- TEST -->
<section class="screen" id="test">
  <div class="progress"><div class="progress-bar" id="progress"></div></div>
  <div class="question" id="questionText"></div>

  <div class="option" onclick="answer(0, this)"><div class="circle"></div><span></span></div>
  <div class="option" onclick="answer(1, this)"><div class="circle"></div><span></span></div>
  <div class="option" onclick="answer(2, this)"><div class="circle"></div><span></span></div>
  <div class="option" onclick="answer(3, this)"><div class="circle"></div><span></span></div>
</section>

<!-- RESULTS -->
<section class="screen" id="results">
  <h1>Gracias por compartir cómo te has sentido</h1>
  <p id="generalSpeech"></p>

  <div class="cards">
    <div class="card">
      <strong>Ansiedad</strong>
      <p id="anxietyLevel"></p>
      <button onclick="openModal('ansiedad')">Leer más</button>
    </div>

    <div class="card">
      <strong>Depresión</strong>
      <p id="depressionLevel"></p>
      <button onclick="openModal('depresion')">Leer más</button>
    </div>

    <div class="card">
      <strong>Estrés</strong>
      <p id="stressLevel"></p>
      <button onclick="openModal('estres')">Leer más</button>
    </div>
  </div>
</section>

<!-- MODAL -->
<div class="modal-bg" id="modal">
  <div class="modal">
    <h2 id="modalTitle"></h2>
    <p id="modalText"></p>
    <p><strong id="specialists"></strong></p>
    <button onclick="closeModal()">Cerrar</button>
  </div>
</div>

<script>
const questions = [
  "Me ha costado mucho descargar la tensión",
  "Me di cuenta que tenía la boca seca",
  "No podía sentir ningún sentimiento positivo",
  "Se me hizo difícil respirar",
  "Se me hizo difícil tomar la iniciativa para hacer cosas",
  "Reaccioné exageradamente en ciertas situaciones",
  "Sentí que mis manos temblaban",
  "He sentido que estaba gastando una gran cantidad de energía",
  "Estaba preocupado por situaciones en las cuales podía tener pánico",
  "He sentido que no había nada que me ilusionara",
  "Me he sentido inquieto",
  "Se me hizo difícil relajarme",
  "Me sentí triste y deprimido",
  "No toleré nada que no me permitiera continuar",
  "Sentí que estaba al borde del pánico",
  "No me pude entusiasmar por nada",
  "Sentí que valía muy poco como persona",
  "He tendido a sentirme enfadado con facilidad",
  "Sentí los latidos de mi corazón sin esfuerzo",
  "Tuve miedo sin razón",
  "Sentí que la vida no tenía ningún sentido"
];

const optionsText = [
  "No me ha ocurrido",
  "Me ha ocurrido un poco",
  "Me ha ocurrido bastante",
  "Me ha ocurrido mucho"
];

const scales = {
  depresion: [2,4,9,12,15,16,20],
  ansiedad: [1,3,6,8,14,18,19],
  estres: [0,5,7,10,11,13,17]
};

let current = 0;
let answers = [];
let specialistsCount = {};

const qText = document.getElementById("questionText");
const optionSpans = document.querySelectorAll(".option span");
const progress = document.getElementById("progress");

function startTest() {
  document.getElementById("welcome").classList.remove("active");
  document.getElementById("test").classList.add("active");
  loadQuestion();
}

function loadQuestion() {
  qText.textContent = questions[current];
  optionSpans.forEach((o,i)=>o.textContent=optionsText[i]);
  progress.style.width = (current / questions.length * 100) + "%";
}

function answer(val, el) {
  answers.push(val);
  document.querySelectorAll(".option").forEach(o=>o.classList.remove("selected"));
  el.classList.add("selected");

  setTimeout(()=>{
    current++;
    if(current < questions.length) loadQuestion();
    else showResults();
  },300);
}

function sumScale(arr) {
  return arr.reduce((s,i)=>s+answers[i],0);
}

function level(score, type) {
  const cut = {
    depresion: [[6,"leve"],[10,"moderado"],[13,"severo"]],
    ansiedad: [[4,"leve"],[7,"moderado"],[9,"severo"]],
    estres: [[9,"leve"],[12,"moderado"],[16,"severo"]]
  };
  for (let [c,l] of cut[type]) if (score <= c) return l;
  return "extremadamente severo";
}

function generateSpecialists(level) {
  if (["moderado","severo","extremadamente severo"].includes(level)) {
    return Math.floor(Math.random() * 2) + 1; // 1–2
  }
  return Math.floor(Math.random() * 3) + 3; // 3–5
}

function showResults() {
  document.getElementById("test").classList.remove("active");
  document.getElementById("results").classList.add("active");

  const d = sumScale(scales.depresion);
  const a = sumScale(scales.ansiedad);
  const e = sumScale(scales.estres);

  const levels = {
    depresion: level(d,"depresion"),
    ansiedad: level(a,"ansiedad"),
    estres: level(e,"estres")
  };

  specialistsCount = {
    depresion: generateSpecialists(levels.depresion),
    ansiedad: generateSpecialists(levels.ansiedad),
    estres: generateSpecialists(levels.estres)
  };

  document.getElementById("depressionLevel").innerHTML = `<strong>Nivel ${levels.depresion}</strong>`;
  document.getElementById("anxietyLevel").innerHTML = `<strong>Nivel ${levels.ansiedad}</strong>`;
  document.getElementById("stressLevel").innerHTML = `<strong>Nivel ${levels.estres}</strong>`;

  const high = Object.values(levels).some(l =>
    ["moderado","severo","extremadamente severo"].includes(l)
  );

  document.getElementById("generalSpeech").textContent =
    high
    ? "A partir de tus respuestas se observan señales emocionales que merecen ser escuchadas con calma y sin juicios."
    : "Tus niveles se encuentran en rangos bajos. Aun así, cuidar tu bienestar emocional sigue siendo importante.";
}

function openModal(type) {
  const texts = {
    depresion: "A veces, cuando el ánimo se vuelve más pesado, no es fácil pedir ayuda. Un acompañante emocional puede ayudarte a explorar lo que estás viviendo.",
    ansiedad: "Vivir con ansiedad puede sentirse como estar siempre en alerta. Hablar de ello puede ayudarte a recuperar poco a poco la calma.",
    estres: "Cuando el estrés se acumula, el cuerpo y la mente piden una pausa. Conversar con alguien puede marcar una diferencia."
  };

  document.getElementById("modalTitle").textContent = type.toUpperCase();
  document.getElementById("modalText").textContent = texts[type];
  document.getElementById("specialists").textContent =
    `Especialistas disponibles: ${specialistsCount[type]}`;

  document.getElementById("modal").style.display = "flex";
}

function closeModal() {
  document.getElementById("modal").style.display = "none";
}
</script>

</body>
</html>
